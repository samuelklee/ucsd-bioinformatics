package ucsd.IV;

import org.testng.Assert;
import org.testng.annotations.Test;

import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;

public class NearestNeighborsTest {
    private static Set<String> outputAsSet(String output) {
        return new HashSet<>(Arrays.asList(output.split("\n")));
    }

    @Test
    public void test() {
        String result = NearestNeighbors.doWork("src/test/resources/IV/sample/NearestNeighbors.txt");
        String expected =
                "1->4\n" +
                "0->5\n" +
                "3->4\n" +
                "2->5\n" +
                "5->2\n" +
                "5->4\n" +
                "5->0\n" +
                "4->1\n" +
                "4->5\n" +
                "4->3\n" +
                "\n" +
                "1->5\n" +
                "0->4\n" +
                "3->4\n" +
                "2->5\n" +
                "5->2\n" +
                "5->4\n" +
                "5->1\n" +
                "4->0\n" +
                "4->5\n" +
                "4->3";
        //internal nodes labeled differently
        Assert.assertEquals(outputAsSet(result).size(), outputAsSet(expected).size());
    }

    @Test
    public void testExtra() {
        String result = NearestNeighbors.doWork("src/test/resources/IV/sample/NearestNeighborsExtra.txt");
        String expected =
                "56->41\n" +
                "56->54\n" +
                "56->51\n" +
                "54->49\n" +
                "54->52\n" +
                "54->56\n" +
                "28->46\n" +
                "48->40\n" +
                "48->36\n" +
                "48->57\n" +
                "29->46\n" +
                "60->57\n" +
                "60->53\n" +
                "60->61\n" +
                "61->55\n" +
                "61->59\n" +
                "61->60\n" +
                "49->34\n" +
                "49->35\n" +
                "49->54\n" +
                "52->38\n" +
                "52->45\n" +
                "52->54\n" +
                "53->39\n" +
                "53->46\n" +
                "53->60\n" +
                "24->44\n" +
                "25->44\n" +
                "26->45\n" +
                "27->45\n" +
                "20->42\n" +
                "21->42\n" +
                "22->43\n" +
                "23->43\n" +
                "46->28\n" +
                "46->29\n" +
                "46->53\n" +
                "47->30\n" +
                "47->31\n" +
                "47->51\n" +
                "44->24\n" +
                "44->25\n" +
                "44->55\n" +
                "45->26\n" +
                "45->27\n" +
                "45->52\n" +
                "42->20\n" +
                "42->21\n" +
                "42->59\n" +
                "43->22\n" +
                "43->23\n" +
                "43->50\n" +
                "40->16\n" +
                "40->17\n" +
                "40->48\n" +
                "41->18\n" +
                "41->19\n" +
                "41->56\n" +
                "1->32\n" +
                "0->32\n" +
                "3->33\n" +
                "2->33\n" +
                "5->34\n" +
                "4->34\n" +
                "7->35\n" +
                "6->35\n" +
                "9->36\n" +
                "8->36\n" +
                "51->47\n" +
                "51->58\n" +
                "51->56\n" +
                "39->14\n" +
                "39->15\n" +
                "39->53\n" +
                "38->12\n" +
                "38->13\n" +
                "38->52\n" +
                "59->42\n" +
                "59->58\n" +
                "59->61\n" +
                "58->51\n" +
                "58->59\n" +
                "58->33\n" +
                "11->37\n" +
                "10->37\n" +
                "13->38\n" +
                "12->38\n" +
                "15->39\n" +
                "14->39\n" +
                "17->40\n" +
                "16->40\n" +
                "33->2\n" +
                "33->3\n" +
                "33->58\n" +
                "32->0\n" +
                "32->1\n" +
                "32->50\n" +
                "31->47\n" +
                "30->47\n" +
                "37->10\n" +
                "37->11\n" +
                "37->55\n" +
                "36->8\n" +
                "36->9\n" +
                "36->48\n" +
                "35->6\n" +
                "35->7\n" +
                "35->49\n" +
                "34->4\n" +
                "34->5\n" +
                "34->49\n" +
                "19->41\n" +
                "55->37\n" +
                "55->44\n" +
                "55->61\n" +
                "18->41\n" +
                "57->50\n" +
                "57->48\n" +
                "57->60\n" +
                "50->32\n" +
                "50->43\n" +
                "50->57\n" +
                "\n" +
                "56->41\n" +
                "56->54\n" +
                "56->58\n" +
                "54->49\n" +
                "54->52\n" +
                "54->56\n" +
                "28->46\n" +
                "48->40\n" +
                "48->36\n" +
                "48->57\n" +
                "29->46\n" +
                "60->57\n" +
                "60->53\n" +
                "60->61\n" +
                "61->55\n" +
                "61->59\n" +
                "61->60\n" +
                "49->34\n" +
                "49->35\n" +
                "49->54\n" +
                "52->38\n" +
                "52->45\n" +
                "52->54\n" +
                "53->39\n" +
                "53->46\n" +
                "53->60\n" +
                "24->44\n" +
                "25->44\n" +
                "26->45\n" +
                "27->45\n" +
                "20->42\n" +
                "21->42\n" +
                "22->43\n" +
                "23->43\n" +
                "46->28\n" +
                "46->29\n" +
                "46->53\n" +
                "47->30\n" +
                "47->31\n" +
                "47->51\n" +
                "44->24\n" +
                "44->25\n" +
                "44->55\n" +
                "45->26\n" +
                "45->27\n" +
                "45->52\n" +
                "42->20\n" +
                "42->21\n" +
                "42->59\n" +
                "43->22\n" +
                "43->23\n" +
                "43->50\n" +
                "40->16\n" +
                "40->17\n" +
                "40->48\n" +
                "41->18\n" +
                "41->19\n" +
                "41->56\n" +
                "1->32\n" +
                "0->32\n" +
                "3->33\n" +
                "2->33\n" +
                "5->34\n" +
                "4->34\n" +
                "7->35\n" +
                "6->35\n" +
                "9->36\n" +
                "8->36\n" +
                "51->47\n" +
                "51->58\n" +
                "51->59\n" +
                "39->14\n" +
                "39->15\n" +
                "39->53\n" +
                "38->12\n" +
                "38->13\n" +
                "38->52\n" +
                "59->42\n" +
                "59->61\n" +
                "59->51\n" +
                "58->56\n" +
                "58->51\n" +
                "58->33\n" +
                "11->37\n" +
                "10->37\n" +
                "13->38\n" +
                "12->38\n" +
                "15->39\n" +
                "14->39\n" +
                "17->40\n" +
                "16->40\n" +
                "33->2\n" +
                "33->3\n" +
                "33->58\n" +
                "32->0\n" +
                "32->1\n" +
                "32->50\n" +
                "31->47\n" +
                "30->47\n" +
                "37->10\n" +
                "37->11\n" +
                "37->55\n" +
                "36->8\n" +
                "36->9\n" +
                "36->48\n" +
                "35->6\n" +
                "35->7\n" +
                "35->49\n" +
                "34->4\n" +
                "34->5\n" +
                "34->49\n" +
                "19->41\n" +
                "55->37\n" +
                "55->44\n" +
                "55->61\n" +
                "18->41\n" +
                "57->50\n" +
                "57->48\n" +
                "57->60\n" +
                "50->32\n" +
                "50->43\n" +
                "50->57";
        //internal nodes labeled differently
        Assert.assertEquals(outputAsSet(result).size(), outputAsSet(expected).size());
    }
}

